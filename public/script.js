function scroll(){var o=document.querySelector("#messages");o.scrollTop=o.scrollHeight}function getColor(){var o=3*Math.floor(120*Math.random());return o+", 60%, 85%"}function changeColor(){App.color=getColor(),App.socket.emit("updateProfile",{nick:App.nick,color:App.color})}function simulate(){var o=document.querySelector(".peopleColors");o.innerHTML="";for(var n=0;n<10;n++)o.innerHTML+="<span class='coloricle' onclick='changeColor()' style='background-color: hsl("+getColor()+")'><span class='info'>Dude</span></span>"}function send(){var o=document.querySelector("#m");return"/c"==o.value.substr(0,2)?App.socket.emit("command",o.value.substr(3)):App.socket.emit("message",o.value),o.value="",!1}function onConnect(){App.socket.emit("onConnect",{nick:App.nick,color:App.color})}var App=App||{};App.socket=io(),App.nick="",App.color=getColor(),App.uniqueID=null,App.socket.on("message",function(o){o.msg=o.msg.toHtmlEntities(),document.querySelector("#messages").innerHTML+="<li class='chatmessage' style='background-color:hsl("+o.color+")'><span class='nick'>"+o.nick+" </span><span class='msg'>"+o.msg+"</span><span class='time'>"+o.time+"</span></li>",scroll()}),App.socket.on("uniqueID",function(o){App.uniqueID=o}),App.socket.on("sysmessage",function(o){var n=document.querySelector(".peopleColors");n.innerHTML="",o.users.forEach(function(o){null!=o&&(n.innerHTML+="<span class='coloricle' style='background-color: hsl("+o.color+")'><span class='info'>"+o.nick+"</span></span>")});var e=document.querySelector(".statusmain");e.innerHTML="<span class='coloricle'  onclick='changeColor()' style='background-color: hsl("+App.color+")'></span>",e.innerHTML+="<div class='nick'>"+App.nick+"</div>",o.count>1?e.innerHTML+=" <div class='peopleCount'> "+o.count+" people online </div>":e.innerHTML+=" <div class='peopleCount'>Only you are online</div>"}),App.nick=prompt("Name yourself!","Guest"),onConnect(),String.prototype.toHtmlEntities=function(){return this.replace(/./gm,function(o){return"&#"+o.charCodeAt(0)+";"})};